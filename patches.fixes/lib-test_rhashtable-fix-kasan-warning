From: Phil Sutter <phil@nwl.cc>
Date: Tue, 25 Jul 2017 13:36:21 +0200
Subject: lib: test_rhashtable: Fix KASAN warning
Git-commit: 783692558a60cd69d8d86900b33846263598ca6c
Patch-mainline: v4.13-rc4
References: bsc#1055359

I forgot one spot when introducing struct test_obj_val.

Fixes: e859afe1ee0c5 ("lib: test_rhashtable: fix for large entry counts")
Reported by: kernel test robot <fengguang.wu@intel.com>
Signed-off-by: Phil Sutter <phil@nwl.cc>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Lee Duncan <lduncan@suse.com>
---
 lib/test_rhashtable.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

--- a/lib/test_rhashtable.c
+++ b/lib/test_rhashtable.c
@@ -203,7 +203,9 @@ static s64 __init test_rhashtable(struct
 
 	pr_info("  Deleting %d keys\n", entries);
 	for (i = 0; i < entries; i++) {
-		u32 key = i * 2;
+		struct test_obj_val key = {
+			.id = i * 2,
+		};
 
 		if (array[i].value.id != TEST_INSERT_FAIL) {
 			obj = rhashtable_lookup_fast(ht, &key, test_rht_params);
