From 1e4cecb083e57bc9e2276d1cf892d691d0258c21 Mon Sep 17 00:00:00 2001
From: Jacek Danecki <Jacek.Danecki@intel.com>
Date: Tue, 14 Jan 2014 07:15:20 +0800
Subject: [PATCH 069/143] drm/i915: add register 0x12400 for ring 1

needed in media tests
---
 drivers/gpu/drm/i915/i915_cmd_parser.c |    6 ++++++
 drivers/gpu/drm/i915/i915_reg.h        |    1 +
 2 files changed, 7 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915_cmd_parser.c b/drivers/gpu/drm/i915/i915_cmd_parser.c
index 39795ee..2f85bb7 100644
--- a/drivers/gpu/drm/i915/i915_cmd_parser.c
+++ b/drivers/gpu/drm/i915/i915_cmd_parser.c
@@ -509,6 +509,10 @@ static const struct drm_i915_reg_descriptor hsw_master_regs[] = {
 	REG32(DERRMR),
 };
 
+static const struct drm_i915_reg_descriptor gen7_vcs_regs[] = {
+	REG32(MFD_ERROR_STATUS),
+};
+
 #undef REG64
 #undef REG32
 
@@ -739,6 +743,8 @@ int i915_cmd_parser_init_ring(struct intel_engine_cs *ring)
 		cmd_tables = gen7_video_cmds;
 		cmd_table_count = ARRAY_SIZE(gen7_video_cmds);
 		ring->get_cmd_length_mask = gen7_bsd_get_cmd_length_mask;
+		ring->reg_table = gen7_vcs_regs;
+		ring->reg_count = ARRAY_SIZE(gen7_vcs_regs);
 		break;
 	case BCS:
 		if (IS_HASWELL(ring->dev)) {
diff --git a/drivers/gpu/drm/i915/i915_reg.h b/drivers/gpu/drm/i915/i915_reg.h
index b434155..9f5d6c0 100644
--- a/drivers/gpu/drm/i915/i915_reg.h
+++ b/drivers/gpu/drm/i915/i915_reg.h
@@ -8153,4 +8153,5 @@ enum skl_disp_power_wells {
 #define GEN9_VEBOX_MOCS_0	0xcb00	/* Video MOCS base register*/
 #define GEN9_BLT_MOCS_0		0xcc00	/* Blitter MOCS base register*/
 
+#define MFD_ERROR_STATUS 0x12400
 #endif /* _I915_REG_H_ */
-- 
1.7.1

