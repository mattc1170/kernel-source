From: Takashi Iwai <tiwai@suse.de>
Subject: ALSA: hda: Workaround for KBL codec power control
Patch-mainline: Never, only for 4.4.x KBL support on SLE12-SP2/SP3
References: bsc#1048356,bsc#1047989,bsc#1055272,bsc#1058413

The support for Intel HD-audio HDMI/DP codec misses the link control
for Kabylake.  This isn't a problem on upstream code just because
there was some code refactoring that doesn't need the extra check of
the codec any longer (the commit a686632fd9a8 "ALSA: hda - Split out
Intel-specific codes from patch_generic_hdmi()").

Meanwhile, on 4.4.x code-base, we still need the extra check of each
Intel codec chip type, and here we need to put 
"is_kabylake()" call.

This is a stop-gap fix only for 4.4.x, and never meant for upstream.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 sound/pci/hda/patch_hdmi.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/sound/pci/hda/patch_hdmi.c
+++ b/sound/pci/hda/patch_hdmi.c
@@ -2465,7 +2465,7 @@ static int patch_generic_hdmi(struct hda
 	 * For previous platforms, there is no such power well feature.
 	 */
 	if (is_valleyview_plus(codec) || is_skylake(codec) ||
-			is_broxton(codec))
+	    is_broxton(codec) || is_kabylake(codec))
 		codec->core.link_power_control = 1;
 
 	if (is_haswell_plus(codec) || is_valleyview_plus(codec)) {
